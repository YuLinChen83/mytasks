(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(t,e,n){t.exports=n(39)},33:function(t,e,n){},35:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(21),i=n(41),c=n(9),s=n(14),u=n(23),l=(n(33),n(3)),d=n(4),p=n(6),f=n(5),h=n(7),m=(n(35),n(11)),O=n.n(m),b=n(12),E="DELETE_TODO",T="TOGGLE_TODO",v="UPDATE_TODO",k="FETCH_TODOLIST_JSON",y="SET_VISIBILITY_FILTER",j=n(10),g=n.n(j),C=function(){var t=Object(b.a)(O.a.mark(function t(){var e;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()("https://moocs-todo.herokuapp.com/api/tasks").then(function(t){return t.json()});case 2:return e=t.sent,t.abrupt("return",function(t){t(N(e))});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),N=function(t){return{type:k,data:t}},S={addTodo:function(t){return function(e){return g()("https://moocs-todo.herokuapp.com/api/tasks",{method:"POST",body:JSON.stringify({title:t,status:"DOING"}),headers:{"content-type":"application/json"}}).then(function(t){if(t.ok)return console.log("addTodo ok!",t),g()("https://moocs-todo.herokuapp.com/api/tasks").then(function(t){return t.json()})}).then(function(t){return e(N(t))}).catch(function(t){return console.error("Error:",t)})}},updateTodo:function(t,e,n){return console.log("updateTodo action"),function(o){return g()("https://moocs-todo.herokuapp.com/api/tasks/".concat(t,"/ "),{method:"PUT",body:JSON.stringify({title:e,status:n}),headers:{"content-type":"application/json"}}).then(function(n){if(n.ok)return console.log("updateTodo ok!",n),o({type:v,id:t,title:e})}).catch(function(t){return console.error("Error:",t)})}},deleteTodo:function(t){return function(e){return g()("https://moocs-todo.herokuapp.com/api/tasks/".concat(t,"/ "),{method:"DELETE"}).then(function(n){if(n.ok)return console.log("deleteTodo ok!",n),e({type:E,id:t})}).catch(function(t){return console.error("Error:",t)})}},toggleTodo:function(t,e){var n="DOING"===e?"DONE":"DOING";return function(e){return g()("https://moocs-todo.herokuapp.com/api/tasks/".concat(t,"/ "),{method:"PUT",body:JSON.stringify({status:n}),headers:{"content-type":"application/json"}}).then(function(n){if(n.ok)return console.log("toggleTodo ok!",n),e({type:T,id:t})}).catch(function(t){return console.error("Error:",t)})}},fetchTodolistJson:C,receiveTodolistJson:N,setVisibilityFilter:function(t){return{type:y,filter:t}}},D=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(p.a)(this,Object(f.a)(e).call(this,t))).handleClick=function(t){n.props.setVisibilityFilter(t),n.setState({filter:t})},n.state={filter:"SHOW_ALL"},n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this,e=this.state.filter;return r.a.createElement("div",{id:"todo-filter"},r.a.createElement("button",{className:"btn ".concat("SHOW_ALL"===e?"active":""),onClick:function(){return t.handleClick("SHOW_ALL")}},"All"),r.a.createElement("button",{className:"btn ".concat("SHOW_ACTIVE"===e?"active":""),onClick:function(){return t.handleClick("SHOW_ACTIVE")}},"Doing"),r.a.createElement("button",{className:"btn ".concat("SHOW_COMPLETED"===e?"active":""),onClick:function(){return t.handleClick("SHOW_COMPLETED")}},"Done"))}}]),e}(o.Component),_=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(p.a)(this,Object(f.a)(e).call(this,t))).handleToggle=function(){n.state.isEditing||n.props.onClick()},n.handleFocus=function(){n.setState({isEditing:!0})},n.handleBlur=function(){n.setState({isEditing:!1})},n.handleChange=function(t){n.setState({title:t.target.value})},n.handleKeyPress=function(t){if(13===t.charCode){var e=n.props.todo;n.props.updateTodo(e.id,n.state.title,e.status)}},n.state={isEditing:!1,title:"..."},n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.setState({isEditing:!1,title:this.props.todo.title})}},{key:"render",value:function(){var t=this.props,e=t.todo,n=t.delTodoClick;return r.a.createElement("li",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("input",{id:e.id,type:"checkbox",checked:"DONE"===e.status,onChange:this.handleToggle}),r.a.createElement("label",{for:e.id})),r.a.createElement("input",{value:this.state.title,type:"text",onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyPress:this.handleKeyPress}),r.a.createElement("button",{className:"pull-right",onClick:n},r.a.createElement("span",{className:"close"})))}}]),e}(o.Component),w=function(t){function e(){return Object(l.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this.props,e=t.todos,n=t.onTodoClick,o=t.deleteTodo,a=t.updateTodo;return r.a.createElement("ul",{id:"todolist"},e.map(function(t){return r.a.createElement(_,{key:t.id,todo:t,onClick:function(){return n(t.id,t.status)},delTodoClick:function(){return o(t.id)},updateTodo:a})}))}}]),e}(o.Component),L=function(t){function e(){return Object(l.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t,e=this.props.addTodo;return r.a.createElement("div",{className:"todo-input"},r.a.createElement("form",{className:"form-inline",onSubmit:function(n){n.preventDefault(),t.value.trim()&&(e(t.value),t.value="")}},r.a.createElement("div",{className:"row"},r.a.createElement("input",{className:"form-control col-md-8",type:"text",ref:function(e){t=e}}),r.a.createElement("button",{type:"submit",className:"btn"},"Add"))))}}]),e}(o.Component),I=function(t){function e(){var t,n;Object(l.a)(this,e);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(p.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).componentDidMount=Object(b.a)(O.a.mark(function t(){var e;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://moocs-todo.herokuapp.com/api/tasks").then(function(t){return t.json()});case 2:e=t.sent,console.log(e),n.props.receiveTodolistJson(e);case 5:case"end":return t.stop()}},t,this)})),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this.props,e=t.todos,n=t.setVisibilityFilter,o=t.onTodoClick,a=t.deleteTodo,i=t.addTodo,c=t.updateTodo;return r.a.createElement("div",{className:"todo-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"todo-header"},"My Tasks"),r.a.createElement(D,{setVisibilityFilter:n}),r.a.createElement(w,{todos:e,onTodoClick:o,deleteTodo:a,updateTodo:c}),r.a.createElement(L,{addTodo:i})))}}]),e}(o.Component),F={setVisibilityFilter:function(t){return S.setVisibilityFilter(t)},fetchTodolistJson:function(){return S.fetchTodolistJson()},receiveTodolistJson:function(t){return S.receiveTodolistJson(t)},onTodoClick:function(t,e){return S.toggleTodo(t,e)},addTodo:function(t){return S.addTodo(t)},updateTodo:function(t,e,n){return S.updateTodo(t,e,n)},deleteTodo:function(t){return S.deleteTodo(t)}},J=Object(s.b)(function(t){return{todos:W(t.todos,t.visibilityFilter)}},F)(I),W=function(t,e){switch(e){case"SHOW_ALL":return t;case"SHOW_COMPLETED":return t.filter(function(t){return"DONE"===t.status});case"SHOW_ACTIVE":return t.filter(function(t){return"DOING"===t.status})}},A=function(t){function e(){return Object(l.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){return r.a.createElement(J,null)}}]),e}(o.Component),H=n(17),P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:return t.filter(function(t){return t.id!==e.id});case T:return t.map(function(t){return t.id===e.id?Object(H.a)({},t,{status:"DOING"===t.status?"DONE":"DOING"}):t});case v:return t.map(function(t){return t.id===e.id?Object(H.a)({},t,{title:e.title}):t});case k:return e.data;default:return t}},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SHOW_ALL",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return e.filter;default:return t}},x=Object(c.c)({todos:P,visibilityFilter:V});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,M=Object(c.e)(x,G(Object(c.a)(u.a)));Object(a.render)(r.a.createElement(s.a,{store:M},r.a.createElement(i.a,null,r.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.53ba0dea.chunk.js.map